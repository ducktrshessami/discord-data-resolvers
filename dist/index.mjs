import{ApplicationCommandOptionType}from"discord-api-types/v10";var CustomError=class extends Error{constructor(message){super(message),this.name=this.constructor.name}},ApplicationCommandOptionResolutionError=class extends CustomError{},ModalFieldResolutionError=class extends CustomError{};function isFocusedOption(option){return"focused"in option&&!!option.focused}var ApplicationCommandOptions=class{_options;_subcommand;_group;_focused;mapOptions(options){options?.forEach(option=>{switch(!0){case option.type===ApplicationCommandOptionType.Subcommand:this._subcommand=option.name;break;case option.type===ApplicationCommandOptionType.SubcommandGroup:this._group=option.name;break;default:isFocusedOption(option)&&(this._focused=option.name),this._options.set(option.name,option);break}"options"in option&&this.mapOptions(option.options)})}constructor(options){this._options=new Map,this._subcommand=null,this._group=null,this._focused=null,this.mapOptions(options)}get(query){let option=this._options.get(query.name)??null;if(query.required&&!option)throw new ApplicationCommandOptionResolutionError(`Unable to find required option: ${query.name}`);if(option&&option.type!==query.type)throw new ApplicationCommandOptionResolutionError(`Expected option type ${ApplicationCommandOptionType[query.type]}. Received: ${ApplicationCommandOptionType[option.type]}`);return option}get subcommand(){return this._subcommand}get group(){return this._group}getFocused(){if(!this._focused)throw new ApplicationCommandOptionResolutionError("Unabled to find focused option");return this._options.get(this._focused)}};function findOption(options,test){if(options)for(let option of options){if(test(option))return option;if("options"in option){let found=findOption(option.options,test);if(found)return found}}return null}function getSubcommand(options){return findOption(options,option=>option.type===ApplicationCommandOptionType.Subcommand)?.name??null}function getGroup(options){return findOption(options,option=>option.type===ApplicationCommandOptionType.SubcommandGroup)?.name??null}function getFocusedOption(options){let focused=findOption(options,isFocusedOption);if(!focused)throw new ApplicationCommandOptionResolutionError("Unabled to find focused option");return focused}import{ComponentType}from"discord-api-types/v10";function findModalField(components,options){for(let field of components){let component=null;switch(field.type){case ComponentType.ActionRow:component=field.components.find(component2=>component2.custom_id===options.customId)??null;break;case ComponentType.Label:component=field.component;break}if(component){if(component.type!==ComponentType.TextInput)throw new ModalFieldResolutionError(`Modal field is not of type ${options.type}: ${options.customId}`);return component}}throw new ModalFieldResolutionError(`Unable to find modal field: ${options.customId}`)}export{ApplicationCommandOptions,findModalField,getFocusedOption,getGroup,getSubcommand,isFocusedOption};
//# sourceMappingURL=index.mjs.map